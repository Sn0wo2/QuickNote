@use 'sass:map';

$light-colors: (
  bg-primary: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%),
  bg-secondary: #ffffff,
  bg-surface: #f8f9fa,
  bg-elevated: #ffffff,
  text-primary: #212529,
  text-secondary: #495057,
  text-tertiary: #6c757d,
  text-on-accent: #ffffff,
  link-primary: #646cff,
  link-hover: #535bf2,
  link-visited: #9146ff,
  interactive: #646cff,
  interactive-hover: #535bf2,
  interactive-pressed: #4249db,
  interactive-disabled: #adb5bd,
  accent-primary: #00ffff,
  accent-secondary: #00e6e6,
  border-primary: #e9ecef,
  border-secondary: #dee2e6,
  success: #28a745,
  warning: #ffc107,
  danger: #dc3545,
  info: #17a2b8,
);

$dark-colors: (
  bg-primary: linear-gradient(135deg, #0d1117 0%, #161b22 100%),
  bg-secondary: #242424,
  bg-surface: #1e1e1e,
  bg-elevated: #2d2d2d,
  text-primary: #f0f6fc,
  text-secondary: #c9d1d9,
  text-tertiary: #8b949e,
  text-on-accent: #212529,
  link-primary: #bb86fc,
  link-hover: #9d65fc,
  link-visited: #b197fc,
  interactive: #bb86fc,
  interactive-hover: #9d65fc,
  interactive-pressed: #7d4dfc,
  interactive-disabled: #495057,
  accent-primary: #00c8c8,
  accent-secondary: #00aaaa,
  border-primary: #30363d,
  border-secondary: #8b949e,
  success: #38d9a9,
  warning: #ffd43b,
  danger: #ff6b6b,
  info: #4dabf7,
);

@mixin set-css-vars($map) {
  @each $prop, $val in $map {
    --#{$prop}: #{$val};
  }
}

:root {
  @include set-css-vars($light-colors);
  --ripple-bg: #{map.get($dark-colors, bg-primary)};
}

:root[data-theme='dark'] {
  @include set-css-vars($dark-colors);
  --ripple-bg: #{map.get($light-colors, bg-primary)};
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme='light']) {
    @include set-css-vars($dark-colors);
    --ripple-bg: #{map.get($light-colors, bg-primary)};
  }
}

.theme-toggle {
  position: fixed;
  top: 1rem;
  right: 1rem;
  background: transparent;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  padding: 0.5rem;
  color: var(--text-primary);
  z-index: 1000;
  border-radius: 50%;
  transition:
    transform 0.3s ease,
    filter 0.3s ease;
  -webkit-tap-highlight-color: transparent;

  &:hover {
    transform: scale(1.2) rotate(15deg);
    filter: brightness(1.2);
  }

  .icon-container {
    width: 1.5em;
    height: 1.5em;
    display: flex;
    align-items: center;
    justify-content: center;
    transform-origin: center center;
  }

  .sun-and-moon {
    overflow: visible;
    .sun {
      transform-origin: center center;
      transition: transform 0.5s cubic-bezier(0.5, 1.25, 0.75, 1.25);
    }
    .sun-beams {
      transform-origin: center center;
      transition:
        transform 0.5s cubic-bezier(0.5, 1.5, 0.75, 1.25),
        opacity 0.3s ease-out;
    }
    .moon-mask {
      transform-origin: center center;
      circle {
        transition: transform 0.4s cubic-bezier(0, 0, 0, 1);
      }
    }
  }
}

:root[data-theme='dark'] .theme-toggle {
  &:hover {
    transform: scale(1.2) rotate(-15deg);
  }
  .sun-and-moon {
    .sun {
      transform: scale(1.75);
    }
    .sun-beams {
      transform: rotateZ(-90deg);
      opacity: 0;
    }
    .moon-mask {
      circle {
        transform: translateX(-14px);
      }
    }
  }
}

.ripple {
  position: fixed;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: var(--ripple-bg);
  pointer-events: none;
  z-index: 999;
  transform: translate(-50%, -50%);
  animation: rippleExpand 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

@keyframes rippleExpand {
  from {
    width: 0;
    height: 0;
    opacity: 0.7;
  }
  to {
    width: 200vmax;
    height: 200vmax;
    opacity: 0;
  }
}
